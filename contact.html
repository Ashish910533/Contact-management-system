<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faculty Contacts - GEHU</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            text-align: center;
            padding: 20px;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            margin: auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h2 {
            font-size: 20px;
            margin-bottom: 20px;
        }
        button {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background: #0056b3;
        }
        .department-btn {
            margin-bottom: 8px;
        }
        ul {
            list-style-type: none;
            padding: 0;
            margin-top: 20px;
        }
        ul li {
            background: #e9ecef;
            padding: 12px;
            margin: 8px 0;
            border-radius: 5px;
            text-align: left;
            font-size: 16px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .back-btn {
            margin-top: 20px;
            background: #6c757d;
        }
        .back-btn:hover {
            background: #5a6268;
        }
        .loading {
            color: #6c757d;
            font-style: italic;
        }
        .error {
            color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Faculty Contacts - Graphic Era Hill University</h2>
        
        <button class="department-btn" onclick="fetchContacts('CSE')">Computer Science and Engineering</button>
        <button class="department-btn" onclick="fetchContacts('ENG')">Department of English</button>
        <button class="department-btn" onclick="fetchContacts('FSN')">Department of Fashion Design</button>
        <button class="department-btn" onclick="fetchContacts('LAW')">School of Law</button>
        <button class="department-btn" onclick="fetchContacts('AGR')">School of Agriculture</button>
        <button class="department-btn" onclick="fetchContacts('PHR')">Department of Pharmacy</button>
        <button class="department-btn" onclick="fetchContacts('CA')">Computer Application</button>
        <button class="department-btn" onclick="fetchContacts('MBA')">Management</button>

        <ul id="contacts"></ul>

        <button class="back-btn" onclick="window.location.href='index.html'">Back to Home</button>
    </div>

    <script>
        // Your Dropbox access token
        const accessToken = "sl.u.AFroZHRMn2REL8BTiaWAGXH7NYgZz1AmUCuJ31NEtaJgmQIEurzdtsLshCP4UOgiT8zfGrgmbVFaHpHoOJo8X4La0oA9ehzhcegu6QCjePU3GJawSqdTmOUmjuZDqUU9RkB-5Mu5TvGf_SjLobsTAPNfcsk-ofEjAtt31-g9fv1GOr6N_WsXcCkKSWjJRdesTBWFjURcGTN4kpMWYzzdycuYlTGceixVzGgAahQxdEAK9mvi86aGeHr2dAZmHj6vugdkd2mJHJdcZ_Z-0pZsvaUh-r3TbZv9-tpldHwPeFvfb7bjCUUJs1tmxh28OjUDnOlX5UFtc-iSxGRpUWjSx87v2V7K6WBkKQnTabOVFeCkSvvjJb8NKjEHq-vTprfiYIbtrDFP_Yz67Dz9R1j5c-2a_Gb-8LRrmdCG_niDMpqoSr2O0nLHC9zgqZxxN0qhZaiAvx_1XufDWQZKHgiizm-6esQDIFnsIcaNedqZt1rAovsxTNU7V4g5FbMG6443dpHLHxpngkfAw_nGmt6HFudk7zcDs8YQdYW98sAgnNFgdzyK4F6B70ZPiRWw9U8R7cMlbS1pBQ6Rb2bKdMRLgGdZgsgruvIxRf9hlNmCN17fKQsVln0ymL_9qtq5v_l6Oo9jFjkAx4e54oGrwOnEG9tNx011RpuWZ9zDrGWD1s1vWz3TV1JsSSCv1GnIA5OX1kxxO90W2srQRhps04HoNH6isPmKKm_QA41S-b2UuM8pxBMLBwHXyBzlBZMDMir_n1fNqP_38Cu5mPlrvm10EMYynDoh7CNVBg8oDgTjwu_i7Wufz8S8w4S7vu-384nF-d6gEEt6X2hlhbteq9hCqM5m6d9ndZXiqjIG3w0LZo82UQFHSux8bKPJqph5QCHRzsaz2Qf8Zma0gKlvInzkHDEy9dazvJ9Dp5WUwmAH1SPcRo8glFFMJHDMWVvuNwiwLAcUgxhyMORcDqpv1hFB4i-6IgJ36o7ADL5COaOg3EXOxMdcTaxDaAcQoHpIVR0lensfV_0dzAb10KMXl_qxls00zJLS0GCmhWtv0XmxSb7aYIlr3vXAQieV4j281ihYoc-VD47tfsyBeFSQXS1y3ok1hU2BWEcnlcdSGv50CAqaw6dQbdbTNmFUQ4SIZbzWpumEK_jWm7xa4r2T5JFJH0VP57CW7I36hUxugB8DIIFUOQHoZrfJ54JHF8dpcFjf_-7uF-gLXWpJZyt5A7jpHFqwreKJA7uH1TTFUYVu-PRuJq5SuRF3cB_hbc7hTJx5EfXKShfncarnSR23j9My2E12x2KyGUWdk0qMZkeqLKUSEsGklnfkZABMudDCSDsW61xHtSp9CAi5RJcVp1T6GK5w0B0C_7P5yYWD3HPgpte8oXTX3PcuXHPPj3SSZmA8OjP4V9nUkn9Qm2WcsCvgdE_eN-8lGUn7EG1R_iOVE13oFA";

        function fetchContacts(department) {
            const contactsList = document.getElementById("contacts");
            contactsList.innerHTML = "<li class='loading'>Loading contacts...</li>";

            fetch("https://content.dropboxapi.com/2/files/download", {
                method: "POST",
                headers: {
                    "Authorization": "Bearer " + accessToken,
                    "Dropbox-API-Arg": JSON.stringify({ path: "/faculty_contact.txt" })
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Failed to fetch contacts");
                }
                return response.text();
            })
            .then(data => {
                // Process the contact data
                const contacts = data.split('\n');
                const filteredContacts = contacts.filter(contact => {
                    // Check if contact starts with department code followed by ":" or "|"
                    return contact.startsWith(department + ":") || 
                           contact.startsWith(department + "|");
                });
                
                if (filteredContacts.length === 0) {
                    contactsList.innerHTML = "<li class='error'>No contacts found for this department</li>";
                    return;
                }
                
                contactsList.innerHTML = "";
                filteredContacts.forEach(contact => {
                    const displayText = contact
                        .replace(department + ":", "")
                        .replace(department + "|", "")
                        .trim()
                        .replace(/\|/g, " - ");
                    
                    const li = document.createElement("li");
                    li.textContent = displayText;
                    contactsList.appendChild(li);
                });
            })
            .catch(error => {
                console.error("Error fetching contacts:", error);
                contactsList.innerHTML = `<li class='error'>Error loading contacts: ${error.message}</li>`;
            });
        }
    </script>
</body>
</html>